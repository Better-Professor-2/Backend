# Migration `20200425101858-init`

This migration has been generated by Alex Karavil at 4/25/2020, 10:18:58 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Professors" (
    "email" text  NOT NULL ,
    "first_name" text  NOT NULL ,
    "id" SERIAL,
    "last_name" text  NOT NULL ,
    "password" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Students" (
    "email" text  NOT NULL ,
    "first_name" text  NOT NULL ,
    "id" SERIAL,
    "last_name" text  NOT NULL ,
    "phone_number" text  NOT NULL ,
    "professorId" integer  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Deadlines" (
    "description" text   ,
    "due_date" timestamp(3)  NOT NULL ,
    "id" SERIAL,
    "name" text  NOT NULL ,
    "studentId" integer  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Notifications" (
    "deadlineId" integer  NOT NULL ,
    "id" SERIAL,
    "message" text  NOT NULL ,
    "notify_time" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Professors.email" ON "public"."Professors"("email")

ALTER TABLE "public"."Students" ADD FOREIGN KEY ("professorId")REFERENCES "public"."Professors"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Deadlines" ADD FOREIGN KEY ("studentId")REFERENCES "public"."Students"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Notifications" ADD FOREIGN KEY ("deadlineId")REFERENCES "public"."Deadlines"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200425101858-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,65 @@
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model Professor {
+  id         Int       @default(autoincrement()) @id
+  // General information about the professor added during signup
+  first_name String
+  last_name  String
+  email      String    @unique
+  password   String
+  // Prisma object for the one-to-many professor and student relation
+  students   Student[]
+
+  @@map("Professors")
+}
+
+model Student {
+  id           Int        @default(autoincrement()) @id
+  // General information about the student (added by professor)
+  first_name   String
+  last_name    String
+  email        String
+  phone_number String
+  // Each student has a professor, but professors can have multiple students
+  professor    Professor  @relation(fields: [professorId], references: [id])
+  professorId  Int
+  // Each student can have deadlines assigned by their professor
+  deadlines    Deadline[]
+
+  @@map("Students")
+}
+
+model Deadline {
+  id            Int            @default(autoincrement()) @id
+  // Name of the deadline - (Ex: Project, Letter of Recommendation, etc)
+  name          String
+  // Description of the deadline, maybe some quick notes?
+  description   String?
+  // When is this deadline for?
+  due_date      DateTime
+  // The student for which this deadline is created for
+  studentId     Int
+  // The custom notifications provided by the professor with a time and message
+  notifications Notification[]
+
+  @@map("Deadlines")
+}
+
+model Notification {
+  id          Int      @default(autoincrement()) @id
+  // What the notification should say
+  message     String
+  // When the notification should be sent
+  notify_time DateTime
+  // For which deadline is the notification for
+  deadlineId  Int
+
+  @@map("Notifications")
+}
```


